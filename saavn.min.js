!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";__webpack_require__(1)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(){function contentLoaded(win,fn){var add,doc,done,_init,_poll,pre,rem,root,top;if(done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",_init=function(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,_init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0},_poll=function(){var e;try{root.doScroll("left")}catch(_error){return e=_error,void setTimeout(_poll,50)}return _init("poll")},"complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(_error){}top&&_poll()}return doc[add](pre+"DOMContentLoaded",_init,!1),doc[add](pre+"readystatechange",_init,!1),win[add](pre+"load",_init,!1)}}function init(){(new Saavn).init()}var Saavn=function(){function Saavn(){_classCallCheck(this,Saavn)}return _createClass(Saavn,[{key:"init",value:function(){var _this=this;this.cacheDom(),this.bindEvents(),this.notifications=[];var target=document.querySelector("#player-album-name"),observer=new MutationObserver(function(mutations){mutations.forEach(function(){_this.getTrackInfo()})}),config={childList:!0,subtree:!0,attributes:!0,characterData:!0};observer.observe(target,config)}},{key:"cacheDom",value:function(){this.$el=document.getElementById("now-playing"),this.target=document.querySelector("#player-album-name")}},{key:"bindEvents",value:function(){}},{key:"getTrackInfo",value:function(){var trackName=this.$el.querySelector("#player-track-name").querySelector("a").text,albumArt=Saavn.getAlbumArt(this.$el.querySelector(".key-art").style["background-image"]),albumName=this.target.querySelector("a").text;null!=this.currentData&&(null==this.currentData||this.currentData.trackName==trackName&&this.currentData.albumArt==albumArt&&this.currentData.albumName==albumName)||(this.currentData={trackName:trackName,albumArt:albumArt,albumName:albumName},this.notify(this.currentData))}},{key:"notify",value:function(data){if(Saavn.checkIfNotificationWorks()&&Saavn.checkNotificationPermission()&&null!=data){console.log("notifications",this.notifications),this.notifications.length>0&&this.notifications.forEach(function(notification){console.log("closing",notification),notification.close()});var notification=new Notification(data.trackName,{icon:data.albumArt,body:data.albumName,time:Saavn.getCurrentTime()});this.notifications.push(notification),console.log(notification)}}}],[{key:"checkIfNotificationWorks",value:function(){return window.Notification}},{key:"checkNotificationPermission",value:function(){return"granted"===Notification.permission||(Notification.requestPermission(),!1)}},{key:"getCurrentTime",value:function(){return Math.floor((new Date).getTime()/1e3)}},{key:"dump",value:function(){console.log(currentData)}},{key:"getAlbumArt",value:function(url){return url=url.trim(),url.substring(url.indexOf('"')+1,url.lastIndexOf('"')).trim()}}]),Saavn}();contentLoaded(window,init)}()}]);